<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <title><%= title %></title>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  
  <!-- CSS personalizado -->
  <link rel="stylesheet" href="/static/css/main.css">
  
  <!-- CSS específico de la página -->
  <% if (typeof pageCSS !== 'undefined') { %>
    <% pageCSS.forEach(css => { %>
      <link rel="stylesheet" href="<%= css %>">
    <% }); %>
  <% } %>
</head>
<body>
  <!-- Auth script (debe cargarse antes) -->
  <script src="/src/js/auth.js"></script>
  
  <!-- Overlay móvil -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>
  
  <div class="wrapper">
    <!-- Sidebar -->
    <%- include('../partials/sidebar', { user, currentPage }) %>
    
    <!-- Main content -->
    <div class="main" id="mainContent">
      <!-- Navbar -->
      <%- include('../partials/navbar', { user }) %>
      
      <!-- Page content -->
      <main class="content">
        <%- body %>
      </main>
      
      <!-- Footer -->
      <%- include('../partials/footer') %>
    </div>
  </div>

  <!-- Scripts base -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Script del sidebar bundle -->
  <script src="/dist/sidebar-bundle.js"></script>
  
  <!-- Scripts globales -->
  <script src="/static/js/app.js"></script>
  
  <!-- Scripts específicos de la página -->
  <% if (typeof pageScripts !== 'undefined') { %>
    <% pageScripts.forEach(script => { %>
      <script src="<%= script %>"></script>
    <% }); %>
  <% } %>
  
  <!-- Script inline de la página -->
  <% if (typeof pageScript !== 'undefined') { %>
    <script>
      <%= pageScript %>
    </script>
  <% } %>
</body>
</html>